!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("tcb",[],t):"object"==typeof exports?exports.tcb=t():e.tcb=t()}(window,function(){return function(e){var t=window.webpackHotUpdatetcb;window.webpackHotUpdatetcb=function(e,n){!function(e,t){if(!b[e]||!O[e])return;for(var n in O[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(y[n]=t[n]);0==--v&&0===_&&T()}(e,n),t&&t(e,n)};var n,r=!0,o="1855c7784bb9ab3da773",i=1e4,a={},u=[],s=[];function c(e){var t=M[e];if(!t)return A;var r=function(r){return t.hot.active?(M[r]?-1===M[r].parents.indexOf(e)&&M[r].parents.push(e):(u=[e],n=r),-1===t.children.indexOf(r)&&t.children.push(r)):(console.warn("[HMR] unexpected require("+r+") from disposed module "+e),u=[]),A(r)},o=function(e){return{configurable:!0,enumerable:!0,get:function(){return A[e]},set:function(t){A[e]=t}}};for(var i in A)Object.prototype.hasOwnProperty.call(A,i)&&"e"!==i&&"t"!==i&&Object.defineProperty(r,i,o(i));return r.e=function(e){return"ready"===l&&d("prepare"),_++,A.e(e).then(t,function(e){throw t(),e});function t(){_--,"prepare"===l&&(g[e]||S(e),0===_&&0===v&&T())}},r.t=function(e,t){return 1&t&&(e=r(e)),A.t(e,-2&t)},r}function f(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:n!==e,active:!0,accept:function(e,n){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._acceptedDependencies[e[r]]=n||function(){};else t._acceptedDependencies[e]=n||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:E,apply:L,status:function(e){if(!e)return l;p.push(e)},addStatusHandler:function(e){p.push(e)},removeStatusHandler:function(e){var t=p.indexOf(e);t>=0&&p.splice(t,1)},data:a[e]};return n=void 0,t}var p=[],l="idle";function d(e){l=e;for(var t=0;t<p.length;t++)p[t].call(null,e)}var h,y,m,v=0,_=0,g={},O={},b={};function w(e){return+e+""===e?+e:e}function E(e){if("idle"!==l)throw new Error("check() is only allowed in idle status");return r=e,d("check"),(t=i,t=t||1e4,new Promise(function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,i=A.p+""+o+".hot-update.json";r.open("GET",i,!0),r.timeout=t,r.send(null)}catch(e){return n(e)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+i+" timed out."));else if(404===r.status)e();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+i+" failed."));else{try{var t=JSON.parse(r.responseText)}catch(e){return void n(e)}e(t)}}})).then(function(e){if(!e)return d("idle"),null;O={},g={},b=e.c,m=e.h,d("prepare");var t=new Promise(function(e,t){h={resolve:e,reject:t}});y={};return S(0),"prepare"===l&&0===_&&0===v&&T(),t});var t}function S(e){b[e]?(O[e]=!0,v++,function(e){var t=document.createElement("script");t.charset="utf-8",t.src=A.p+""+e+"."+o+".hot-update.js",document.head.appendChild(t)}(e)):g[e]=!0}function T(){d("ready");var e=h;if(h=null,e)if(r)Promise.resolve().then(function(){return L(r)}).then(function(t){e.resolve(t)},function(t){e.reject(t)});else{var t=[];for(var n in y)Object.prototype.hasOwnProperty.call(y,n)&&t.push(w(n));e.resolve(t)}}function L(t){if("ready"!==l)throw new Error("apply() is only allowed in ready status");var n,r,i,s,c;function f(e){for(var t=[e],n={},r=t.slice().map(function(e){return{chain:[e],id:e}});r.length>0;){var o=r.pop(),i=o.id,a=o.chain;if((s=M[i])&&!s.hot._selfAccepted){if(s.hot._selfDeclined)return{type:"self-declined",chain:a,moduleId:i};if(s.hot._main)return{type:"unaccepted",chain:a,moduleId:i};for(var u=0;u<s.parents.length;u++){var c=s.parents[u],f=M[c];if(f){if(f.hot._declinedDependencies[i])return{type:"declined",chain:a.concat([c]),moduleId:i,parentId:c};-1===t.indexOf(c)&&(f.hot._acceptedDependencies[i]?(n[c]||(n[c]=[]),p(n[c],[i])):(delete n[c],t.push(c),r.push({chain:a.concat([c]),id:c})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}t=t||{};var h={},v=[],_={},g=function(){console.warn("[HMR] unexpected require("+E.moduleId+") to disposed module")};for(var O in y)if(Object.prototype.hasOwnProperty.call(y,O)){var E;c=w(O);var S=!1,T=!1,L=!1,P="";switch((E=y[O]?f(c):{type:"disposed",moduleId:O}).chain&&(P="\nUpdate propagation: "+E.chain.join(" -> ")),E.type){case"self-declined":t.onDeclined&&t.onDeclined(E),t.ignoreDeclined||(S=new Error("Aborted because of self decline: "+E.moduleId+P));break;case"declined":t.onDeclined&&t.onDeclined(E),t.ignoreDeclined||(S=new Error("Aborted because of declined dependency: "+E.moduleId+" in "+E.parentId+P));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(E),t.ignoreUnaccepted||(S=new Error("Aborted because "+c+" is not accepted"+P));break;case"accepted":t.onAccepted&&t.onAccepted(E),T=!0;break;case"disposed":t.onDisposed&&t.onDisposed(E),L=!0;break;default:throw new Error("Unexception type "+E.type)}if(S)return d("abort"),Promise.reject(S);if(T)for(c in _[c]=y[c],p(v,E.outdatedModules),E.outdatedDependencies)Object.prototype.hasOwnProperty.call(E.outdatedDependencies,c)&&(h[c]||(h[c]=[]),p(h[c],E.outdatedDependencies[c]));L&&(p(v,[E.moduleId]),_[c]=g)}var N,C=[];for(r=0;r<v.length;r++)c=v[r],M[c]&&M[c].hot._selfAccepted&&C.push({module:c,errorHandler:M[c].hot._selfAccepted});d("dispose"),Object.keys(b).forEach(function(e){!1===b[e]&&function(e){delete installedChunks[e]}(e)});for(var I,D,R=v.slice();R.length>0;)if(c=R.pop(),s=M[c]){var j={},x=s.hot._disposeHandlers;for(i=0;i<x.length;i++)(n=x[i])(j);for(a[c]=j,s.hot.active=!1,delete M[c],delete h[c],i=0;i<s.children.length;i++){var U=M[s.children[i]];U&&((N=U.parents.indexOf(c))>=0&&U.parents.splice(N,1))}}for(c in h)if(Object.prototype.hasOwnProperty.call(h,c)&&(s=M[c]))for(D=h[c],i=0;i<D.length;i++)I=D[i],(N=s.children.indexOf(I))>=0&&s.children.splice(N,1);for(c in d("apply"),o=m,_)Object.prototype.hasOwnProperty.call(_,c)&&(e[c]=_[c]);var q=null;for(c in h)if(Object.prototype.hasOwnProperty.call(h,c)&&(s=M[c])){D=h[c];var F=[];for(r=0;r<D.length;r++)if(I=D[r],n=s.hot._acceptedDependencies[I]){if(-1!==F.indexOf(n))continue;F.push(n)}for(r=0;r<F.length;r++){n=F[r];try{n(D)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:c,dependencyId:D[r],error:e}),t.ignoreErrored||q||(q=e)}}}for(r=0;r<C.length;r++){var G=C[r];c=G.module,u=[c];try{A(c)}catch(e){if("function"==typeof G.errorHandler)try{G.errorHandler(e)}catch(n){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:c,error:n,originalError:e}),t.ignoreErrored||q||(q=n),q||(q=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:c,error:e}),t.ignoreErrored||q||(q=e)}}return q?(d("fail"),Promise.reject(q)):(d("idle"),new Promise(function(e){e(v)}))}var M={};function A(t){if(M[t])return M[t].exports;var n=M[t]={i:t,l:!1,exports:{},hot:f(t),parents:(s=u,u=[],s),children:[]};return e[t].call(n.exports,n,n.exports,c(t)),n.l=!0,n.exports}return A.m=e,A.c=M,A.d=function(e,t,n){A.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},A.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},A.t=function(e,t){if(1&t&&(e=A(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(A.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)A.d(n,r,function(t){return e[t]}.bind(null,r));return n},A.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return A.d(t,"a",t),t},A.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},A.p="",A.h=function(){return o},c(69)(A.s=69)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(42);!function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(42)),t.SYMBOL_UNSET_FIELD_NAME=r.default.for("UNSET_FIELD_NAME"),t.SYMBOL_UPDATE_COMMAND=r.default.for("UPDATE_COMMAND"),t.SYMBOL_QUERY_COMMAND=r.default.for("QUERY_COMMAND"),t.SYMBOL_LOGIC_COMMAND=r.default.for("LOGIC_COMMAND"),t.SYMBOL_GEO_POINT=r.default.for("GEO_POINT"),t.SYMBOL_GEO_LINE_STRING=r.default.for("SYMBOL_GEO_LINE_STRING"),t.SYMBOL_GEO_POLYGON=r.default.for("SYMBOL_GEO_POLYGON"),t.SYMBOL_GEO_MULTI_POINT=r.default.for("SYMBOL_GEO_MULTI_POINT"),t.SYMBOL_GEO_MULTI_LINE_STRING=r.default.for("SYMBOL_GEO_MULTI_LINE_STRING"),t.SYMBOL_GEO_MULTI_POLYGON=r.default.for("SYMBOL_GEO_MULTI_POLYGON"),t.SYMBOL_SERVER_DATE=r.default.for("SERVER_DATE"),t.SYMBOL_REGEXP=r.default.for("REGEXP")},function(e,t,n){"use strict";var r=n(55),o=n(104),i=Object.prototype.toString;function a(e){return"[object Array]"===i.call(e)}function u(e){return null!==e&&"object"==typeof e}function s(e){return"[object Function]"===i.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),a(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:o,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:u,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:s,isStream:function(e){return u(e)&&s(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,o=arguments.length;r<o;r++)c(arguments[r],n);return t},extend:function(e,t,n){return c(t,function(t,o){e[o]=n&&"function"==typeof t?r(t,n):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(42);t.getType=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},t.isObject=function(e){return"object"===t.getType(e)},t.isString=function(e){return"string"===t.getType(e)},t.isNumber=function(e){return"number"===t.getType(e)},t.isPromise=function(e){return"promise"===t.getType(e)},t.isFunction=function(e){return"function"==typeof e},t.isArray=function(e){return Array.isArray(e)},t.isDate=function(e){return"date"===t.getType(e)},t.isRegExp=function(e){return"regexp"===t.getType(e)},t.isInternalObject=function(e){return e&&e._internalType instanceof r.InternalSymbol},t.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(6),o=n(16);e.exports=n(7)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(14),o=n(46),i=n(25),a=Object.defineProperty;t.f=n(7)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){e.exports=!n(15)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(81),o=n(24);e.exports=function(e){return r(o(e))}},function(e,t,n){var r=n(29)("wks"),o=n(17),i=n(3).Symbol,a="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=r},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(54),o=n(36),i=n(37),a=n(18),u=function(){function e(e){this.config=e,this.cache=new i.Cache(e.persistence),this.localKey=o.JWT_KEY+"_"+e.env}return e.prototype.send=function(e,t){var n,i=this,u=this.cache.getStore(this.localKey);u||(n=a.getQuery("code"));var s=setTimeout(function(){console.warn("Database operation is longer than 3s. Please check query performance and your network environment.")},3e3),c=Promise.resolve(null);u||"auth.getJwt"===e||(c=this.waitToken());try{return c.then(function(){var a,u=t.onUploadProgress||void 0,s="application/x-www-form-urlencoded",c=Object.assign({},t,{action:e,env:i.config.env,token:i.cache.getStore(i.localKey),code:n});if("storage.uploadFile"===e){for(var f in a=new FormData,c)c.hasOwnProperty(f)&&void 0!==c[f]&&"onUploadProgress"!==f&&a.append(f,c[f]);s="multipart/form-data"}else s="application/json;charset=UTF-8",a=c;var p={headers:{"content-type":s},onUploadProgress:u};return r.default.post(o.BASE_URL,a,p).then(function(e){if("OK"===e.statusText)return e.data;throw new Error("network request error")}).catch(function(e){return e})})}finally{clearTimeout(s)}},e.prototype.waitToken=function(){var e=this,t=this,n=0;return new Promise(function(r,o){var i=setInterval(function(){t.cache.getStore(e.localKey)&&(clearInterval(i),r()),(n+=10)>5e3&&o(new Error("request timed out"))},10)})},e}();t.Request=u},function(e,t){e.exports=!0},function(e,t){var n=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(10);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getQuery=function(e,t){if("undefined"==typeof window)return!1;var n=t||window.location.search,r=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),o=n.substr(n.indexOf("?")+1).match(r);return null!=o?o[2]:""},t.getHash=function(e){for(var t=(window.location.hash||"").replace(/^\#/,"").split("&"),n=0;n<t.length;n++){var r=t[n].split("=");if(r[0]===e)return r[1]}return""},t.removeParam=function(e,t){var n=t.split("?")[0],r=[],o=-1!==t.indexOf("?")?t.split("?")[1]:"";if(""!==o){for(var i=(r=o.split("&")).length-1;i>=0;i-=1)r[i].split("=")[0]===e&&r.splice(i,1);n=n+"?"+r.join("&")}return n},t.createPromiseCallback=function(){var e;if(!Promise){(e=function(){}).promise={};var t=function(){throw new Error('Your Node runtime does support ES6 Promises. Set "global.Promise" to your preferred implementation of promises.')};return Object.defineProperty(e.promise,"then",{get:t}),Object.defineProperty(e.promise,"catch",{get:t}),e}var n=new Promise(function(t,n){e=function(e,r){return e?n(e):t(r)}});return e.promise=n,e}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(39)),r(n(43)),r(n(63)),r(n(126)),r(n(127)),r(n(128))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0);t.SET="set",t.REMOVE="remove",t.INC="inc",t.MUL="mul",t.PUSH="push",t.POP="pop",t.SHIFT="shift",t.UNSHIFT="unshift",function(e){e.SET="set",e.REMOVE="remove",e.INC="inc",e.MUL="mul",e.PUSH="push",e.POP="pop",e.SHIFT="shift",e.UNSHIFT="unshift"}(r=t.UPDATE_COMMANDS_LITERAL||(t.UPDATE_COMMANDS_LITERAL={}));var i=function(){function e(e,t,n){this._internalType=o.SYMBOL_UPDATE_COMMAND,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=t,this.fieldName=n||o.SYMBOL_UNSET_FIELD_NAME}return e.prototype._setFieldName=function(t){return new e(this.operator,this.operands,t)},e}();function a(e){return e&&e instanceof i&&e._internalType===o.SYMBOL_UPDATE_COMMAND}t.UpdateCommand=i,t.isUpdateCommand=a,t.isKnownUpdateCommand=function(e){return a(e)&&e.operator.toUpperCase()in r},t.default=i},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(22),u=n(0),s=n(19),c=n(2);t.EQ="eq",t.NEQ="neq",t.GT="gt",t.GTE="gte",t.LT="lt",t.LTE="lte",t.IN="in",t.NIN="nin",function(e){e.EQ="eq",e.NEQ="neq",e.GT="gt",e.GTE="gte",e.LT="lt",e.LTE="lte",e.IN="in",e.NIN="nin",e.GEO_NEAR="geoNear",e.GEO_WITHIN="geoWithin",e.GEO_INTERSECTS="geoIntersects"}(i=t.QUERY_COMMANDS_LITERAL||(t.QUERY_COMMANDS_LITERAL={}));var f=function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;return o.operator=t,o._internalType=u.SYMBOL_QUERY_COMMAND,o}return o(t,e),t.prototype._setFieldName=function(e){return new t(this.operator,this.operands,e)},t.prototype.eq=function(e){var n=new t(i.EQ,[e],this.fieldName);return this.and(n)},t.prototype.neq=function(e){var n=new t(i.NEQ,[e],this.fieldName);return this.and(n)},t.prototype.gt=function(e){var n=new t(i.GT,[e],this.fieldName);return this.and(n)},t.prototype.gte=function(e){var n=new t(i.GTE,[e],this.fieldName);return this.and(n)},t.prototype.lt=function(e){var n=new t(i.LT,[e],this.fieldName);return this.and(n)},t.prototype.lte=function(e){var n=new t(i.LTE,[e],this.fieldName);return this.and(n)},t.prototype.in=function(e){var n=new t(i.IN,e,this.fieldName);return this.and(n)},t.prototype.nin=function(e){var n=new t(i.NIN,e,this.fieldName);return this.and(n)},t.prototype.geoNear=function(e){if(!(e.geometry instanceof s.Point))throw new TypeError('"geometry" must be of type Point. Received type '+typeof e.geometry);if(void 0!==e.maxDistance&&!c.isNumber(e.maxDistance))throw new TypeError('"maxDistance" must be of type Number. Received type '+typeof e.maxDistance);if(void 0!==e.minDistance&&!c.isNumber(e.minDistance))throw new TypeError('"minDistance" must be of type Number. Received type '+typeof e.minDistance);var n=new t(i.GEO_NEAR,[e],this.fieldName);return this.and(n)},t.prototype.geoWithin=function(e){if(!(e.geometry instanceof s.MultiPolygon||e.geometry instanceof s.Polygon))throw new TypeError('"geometry" must be of type Polygon or MultiPolygon. Received type '+typeof e.geometry);var n=new t(i.GEO_WITHIN,[e],this.fieldName);return this.and(n)},t.prototype.geoIntersects=function(e){if(!(e.geometry instanceof s.Point||e.geometry instanceof s.LineString||e.geometry instanceof s.Polygon||e.geometry instanceof s.MultiPoint||e.geometry instanceof s.MultiLineString||e.geometry instanceof s.MultiPolygon))throw new TypeError('"geometry" must be of type Point, LineString, Polygon, MultiPoint, MultiLineString or MultiPolygon. Received type '+typeof e.geometry);var n=new t(i.GEO_INTERSECTS,[e],this.fieldName);return this.and(n)},t}(a.LogicCommand);function p(e){return e&&e instanceof f&&e._internalType===u.SYMBOL_QUERY_COMMAND}t.QueryCommand=f,t.isQueryCommand=p,t.isKnownQueryCommand=function(e){return p(e)&&e.operator.toUpperCase()in i},t.isComparisonCommand=function(e){return p(e)},t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0),i=n(21);t.AND="and",t.OR="or",t.NOT="not",t.NOR="nor",function(e){e.AND="and",e.OR="or",e.NOT="not",e.NOR="nor"}(r=t.LOGIC_COMMANDS_LITERAL||(t.LOGIC_COMMANDS_LITERAL={}));var a=function(){function e(e,t,n){if(this._internalType=o.SYMBOL_LOGIC_COMMAND,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=t,this.fieldName=n||o.SYMBOL_UNSET_FIELD_NAME,this.fieldName!==o.SYMBOL_UNSET_FIELD_NAME){t=t.slice(),this.operands=t;for(var r=0,a=t.length;r<a;r++){var s=t[r];(u(s)||i.isQueryCommand(s))&&(t[r]=s._setFieldName(this.fieldName))}}}return e.prototype._setFieldName=function(t){var n=this.operands.map(function(n){return n instanceof e?n._setFieldName(t):n});return new e(this.operator,n,t)},e.prototype.and=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=Array.isArray(arguments[0])?arguments[0]:Array.from(arguments);return o.unshift(this),new e(r.AND,o,this.fieldName)},e.prototype.or=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=Array.isArray(arguments[0])?arguments[0]:Array.from(arguments);return o.unshift(this),new e(r.OR,o,this.fieldName)},e}();function u(e){return e&&e instanceof a&&e._internalType===o.SYMBOL_LOGIC_COMMAND}t.LogicCommand=a,t.isLogicCommand=u,t.isKnownLogicCommand=function(e){return u&&e.operator.toUpperCase()in r},t.default=a},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(10);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports={}},function(e,t,n){var r=n(50),o=n(30);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){var r=n(29)("keys"),o=n(17);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t,n){var r=n(13),o=n(3),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(12)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(6).f,o=n(4),i=n(9)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){t.f=n(9)},function(e,t,n){var r=n(3),o=n(13),i=n(12),a=n(32),u=n(6).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||u(t,e,{value:a.f(e)})}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";(function(t){var r=n(1),o=n(106),i={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var u,s={adapter:("undefined"!=typeof XMLHttpRequest?u=n(57):void 0!==t&&(u=n(57)),u),transformRequest:[function(e,t){return o(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};s.headers={common:{Accept:"application/json, text/plain, */*"}},r.forEach(["delete","get","head"],function(e){s.headers[e]={}}),r.forEach(["post","put","patch"],function(e){s.headers[e]=r.merge(i)}),e.exports=s}).call(this,n(56))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JWT_KEY="tcbjwttoken",t.BASE_URL="http://tcb-api.tencentcloudapi.com/web"},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(e){this.storageClass="local"===e?localStorage:"none"===e?new r:sessionStorage}return t.prototype.setStore=function(e,t,n){try{if(!this.storageClass)return}catch(e){return}var r,o={};o.version=n||"localCachev1",o.content=t,r=JSON.stringify(o);try{this.storageClass.setItem(e,r)}catch(e){return}},t.prototype.getStore=function(t,n){try{if(e&&e.env&&e.env.tcb_token)return e.env.tcb_token;if(!this.storageClass)return}catch(e){return""}n=n||"localCachev1";var r=this.storageClass.getItem(t);return r&&r.indexOf(n)>=0?JSON.parse(r).content:""},t.prototype.removeStore=function(e){this.storageClass.removeItem(e)},t}();t.Cache=n;var r=function(){function e(){window.tcbObject||(window.tcbObject={})}return e.prototype.setItem=function(e,t){window.tcbObject[e]=t},e.prototype.getItem=function(e){return window.tcbObject[e]},e.prototype.removeItem=function(e){delete window.tcbObject[e]},e.prototype.clear=function(){delete window.tcbObject},e}()}).call(this,n(56))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19),o=n(129),i=n(133),a=n(41),u=n(134),s=function(){function e(e){this.config=e,this.Geo=r,this.serverDate=a.ServerDateConstructor,this.command=i.Command,this.RegExp=u.RegExpConstructor}return e.prototype.collection=function(e){if(!e)throw new Error("Collection name is required");return new o.CollectionReference(this,e)},e.prototype.createCollection=function(t){var n={collectionName:t};return new e.reqClass(this.config).send("database.addCollection",n)},e}();t.Db=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(61),o=n(0),i=n(2),a=function(){function e(e,t){r.Validate.isGeopoint("longitude",e),r.Validate.isGeopoint("latitude",t),this.longitude=e,this.latitude=t}return e.prototype.parse=function(e){var t;return(t={})[e]={type:"Point",coordinates:[this.longitude,this.latitude]},t},e.prototype.toJSON=function(){return{type:"Point",coordinates:[this.longitude,this.latitude]}},e.prototype.toReadableString=function(){return"["+this.longitude+","+this.latitude+"]"},e.validate=function(e){return"Point"===e.type&&i.isArray(e.coordinates)&&r.Validate.isGeopoint("longitude",e.coordinates[0])&&r.Validate.isGeopoint("latitude",e.coordinates[1])},Object.defineProperty(e.prototype,"_internalType",{get:function(){return o.SYMBOL_GEO_POINT},enumerable:!0,configurable:!0}),e}();t.Point=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(62),o=n(19),i=n(41),a=function(){function e(){}return e.formatResDocumentData=function(t){return t.map(function(t){return e.formatField(t)})},e.formatField=function(t){var n=Object.keys(t),i={};return Array.isArray(t)&&(i=[]),n.forEach(function(n){var a,u=t[n];switch(e.whichType(u)){case r.FieldType.GeoPoint:a=new o.Point(u.coordinates[0],u.coordinates[1]);break;case r.FieldType.GeoLineString:a=new o.LineString(u.coordinates.map(function(e){return new o.Point(e[0],e[1])}));break;case r.FieldType.GeoPolygon:a=new o.Polygon(u.coordinates.map(function(e){return new o.LineString(e.map(function(e){var t=e[0],n=e[1];return new o.Point(t,n)}))}));break;case r.FieldType.GeoMultiPoint:a=new o.MultiPoint(u.coordinates.map(function(e){return new o.Point(e[0],e[1])}));break;case r.FieldType.GeoMultiLineString:a=new o.MultiLineString(u.coordinates.map(function(e){return new o.LineString(e.map(function(e){var t=e[0],n=e[1];return new o.Point(t,n)}))}));break;case r.FieldType.GeoMultiPolygon:a=new o.MultiPolygon(u.coordinates.map(function(e){return new o.Polygon(e.map(function(e){return new o.LineString(e.map(function(e){var t=e[0],n=e[1];return new o.Point(t,n)}))}))}));break;case r.FieldType.Timestamp:a=new Date(1e3*u.$timestamp);break;case r.FieldType.Object:case r.FieldType.Array:a=e.formatField(u);break;case r.FieldType.ServerDate:a=new Date(u.$date);break;default:a=u}Array.isArray(i)?i.push(a):i[n]=a}),i},e.whichType=function(e){var t=Object.prototype.toString.call(e).slice(8,-1);if(t===r.FieldType.Object){if(e instanceof o.Point)return r.FieldType.GeoPoint;if(e instanceof Date)return r.FieldType.Timestamp;if(e instanceof i.ServerDate)return r.FieldType.ServerDate;e.$timestamp?t=r.FieldType.Timestamp:e.$date?t=r.FieldType.ServerDate:o.Point.validate(e)?t=r.FieldType.GeoPoint:o.LineString.validate(e)?t=r.FieldType.GeoLineString:o.Polygon.validate(e)?t=r.FieldType.GeoPolygon:o.MultiPoint.validate(e)?t=r.FieldType.GeoMultiPoint:o.MultiLineString.validate(e)?t=r.FieldType.GeoMultiLineString:o.MultiPolygon.validate(e)&&(t=r.FieldType.GeoMultiPolygon)}return t},e.generateDocId=function(){for(var e="ABCDEFabcdef0123456789",t="",n=0;n<24;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},e}();t.Util=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(){function e(e){var t=(void 0===e?{}:e).offset,n=void 0===t?0:t;this.offset=n}return Object.defineProperty(e.prototype,"_internalType",{get:function(){return r.SYMBOL_SERVER_DATE},enumerable:!0,configurable:!0}),e.prototype.parse=function(){return{$date:{offset:this.offset}}},e}();t.ServerDate=o,t.ServerDateConstructor=function(e){return new o(e)}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=[],a={},u=function(e){function t(t,n){if(n!==a)throw new TypeError("InternalSymbol cannot be constructed with new operator");return e.call(this,t)||this}return o(t,e),t.for=function(e){for(var n=0,r=i.length;n<r;n++)if(i[n].target===e)return i[n].instance;var o=new t(e,a);return i.push({target:e,instance:o}),o},t}(function(){return function(e){Object.defineProperties(this,{target:{enumerable:!1,writable:!1,configurable:!1,value:e}})}}());t.InternalSymbol=u,t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(39),i=n(2),a=function(){function e(e){if(!i.isArray(e))throw new TypeError('"points" must be of type Point[]. Received type '+typeof e);if(e.length<2)throw new Error('"points" must contain 2 points at least');e.forEach(function(e){if(!(e instanceof o.Point))throw new TypeError('"points" must be of type Point[]. Received type '+typeof e+"[]")}),this.points=e}return e.prototype.parse=function(e){var t;return(t={})[e]={type:"LineString",coordinates:this.points.map(function(e){return e.toJSON().coordinates})},t},e.prototype.toJSON=function(){return{type:"LineString",coordinates:this.points.map(function(e){return e.toJSON().coordinates})}},e.validate=function(e){if("LineString"!==e.type||!i.isArray(e.coordinates))return!1;for(var t=0,n=e.coordinates;t<n.length;t++){var r=n[t];if(!i.isNumber(r[0])||!i.isNumber(r[1]))return!1}return!0},e.isClosed=function(e){var t=e.points[0],n=e.points[e.points.length-1];if(t.latitude===n.latitude&&t.longitude===n.longitude)return!0},Object.defineProperty(e.prototype,"_internalType",{get:function(){return r.SYMBOL_GEO_LINE_STRING},enumerable:!0,configurable:!0}),e}();t.LineString=a},function(e,t,n){"use strict";var r=n(12),o=n(45),i=n(48),a=n(5),u=n(26),s=n(79),c=n(31),f=n(86),p=n(9)("iterator"),l=!([].keys&&"next"in[].keys()),d=function(){return this};e.exports=function(e,t,n,h,y,m,v){s(n,t,h);var _,g,O,b=function(e){if(!l&&e in T)return T[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},w=t+" Iterator",E="values"==y,S=!1,T=e.prototype,L=T[p]||T["@@iterator"]||y&&T[y],M=L||b(y),A=y?E?b("entries"):M:void 0,P="Array"==t&&T.entries||L;if(P&&(O=f(P.call(new e)))!==Object.prototype&&O.next&&(c(O,w,!0),r||"function"==typeof O[p]||a(O,p,d)),E&&L&&"values"!==L.name&&(S=!0,M=function(){return L.call(this)}),r&&!v||!l&&!S&&T[p]||a(T,p,M),u[t]=M,u[w]=d,y)if(_={values:E?M:b("values"),keys:m?M:b("keys"),entries:A},v)for(g in _)g in T||i(T,g,_[g]);else o(o.P+o.F*(l||S),t,_);return _}},function(e,t,n){var r=n(3),o=n(13),i=n(77),a=n(5),u=n(4),s=function(e,t,n){var c,f,p,l=e&s.F,d=e&s.G,h=e&s.S,y=e&s.P,m=e&s.B,v=e&s.W,_=d?o:o[t]||(o[t]={}),g=_.prototype,O=d?r:h?r[t]:(r[t]||{}).prototype;for(c in d&&(n=t),n)(f=!l&&O&&void 0!==O[c])&&u(_,c)||(p=f?O[c]:n[c],_[c]=d&&"function"!=typeof O[c]?n[c]:m&&f?i(p,r):v&&O[c]==p?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(p):y&&"function"==typeof p?i(Function.call,p):p,y&&((_.virtual||(_.virtual={}))[c]=p,e&s.R&&g&&!g[c]&&a(g,c,p)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,n){e.exports=!n(7)&&!n(15)(function(){return 7!=Object.defineProperty(n(47)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(10),o=n(3).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){e.exports=n(5)},function(e,t,n){var r=n(14),o=n(80),i=n(30),a=n(28)("IE_PROTO"),u=function(){},s=function(){var e,t=n(47)("iframe"),r=i.length;for(t.style.display="none",n(85).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),s=e.F;r--;)delete s.prototype[i[r]];return s()};e.exports=Object.create||function(e,t){var n;return null!==e?(u.prototype=r(e),n=new u,u.prototype=null,n[a]=e):n=s(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(4),o=n(8),i=n(82)(!1),a=n(28)("IE_PROTO");e.exports=function(e,t){var n,u=o(e),s=0,c=[];for(n in u)n!=a&&r(u,n)&&c.push(n);for(;t.length>s;)r(u,n=t[s++])&&(~i(c,n)||c.push(n));return c}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(50),o=n(30).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,t,n){e.exports=n(103)},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var s,c=[],f=!1,p=-1;function l(){f&&s&&(f=!1,s.length?c=s.concat(c):p=-1,c.length&&d())}function d(){if(!f){var e=u(l);f=!0;for(var t=c.length;t;){for(s=c,c=[];++p<t;)s&&s[p].run();p=-1,t=c.length}s=null,f=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function y(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||f||u(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(1),o=n(107),i=n(109),a=n(110),u=n(111),s=n(58),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(112);e.exports=function(e){return new Promise(function(t,f){var p=e.data,l=e.headers;r.isFormData(p)&&delete l["Content-Type"];var d=new XMLHttpRequest,h="onreadystatechange",y=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in d||u(e.url)||(d=new window.XDomainRequest,h="onload",y=!0,d.onprogress=function(){},d.ontimeout=function(){}),e.auth){var m=e.auth.username||"",v=e.auth.password||"";l.Authorization="Basic "+c(m+":"+v)}if(d.open(e.method.toUpperCase(),i(e.url,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d[h]=function(){if(d&&(4===d.readyState||y)&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in d?a(d.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?d.response:d.responseText,status:1223===d.status?204:d.status,statusText:1223===d.status?"No Content":d.statusText,headers:n,config:e,request:d};o(t,f,r),d=null}},d.onerror=function(){f(s("Network Error",e,null,d)),d=null},d.ontimeout=function(){f(s("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",d)),d=null},r.isStandardBrowserEnv()){var _=n(113),g=(e.withCredentials||u(e.url))&&e.xsrfCookieName?_.read(e.xsrfCookieName):void 0;g&&(l[e.xsrfHeaderName]=g)}if("setRequestHeader"in d&&r.forEach(l,function(e,t){void 0===p&&"content-type"===t.toLowerCase()?delete l[t]:d.setRequestHeader(t,e)}),e.withCredentials&&(d.withCredentials=!0),e.responseType)try{d.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){d&&(d.abort(),f(e),d=null)}),void 0===p&&(p=null),d.send(p)})}},function(e,t,n){"use strict";var r=n(108);e.exports=function(e,t,n,o,i){var a=new Error(e);return r(a,t,n,o,i)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(62),o=n(40),i=function(){function e(){}return e.isGeopoint=function(e,t){if(o.Util.whichType(t)!==r.FieldType.Number)throw new Error("Geo Point must be number type");var n=Math.abs(t);if("latitude"===e&&n>90)throw new Error("latitude should be a number ranges from -90 to 90");if("longitude"===e&&n>180)throw new Error("longitude should be a number ranges from -180 to 180");return!0},e.isInteger=function(e,t){if(!Number.isInteger(t))throw new Error(e+r.ErrorCode.IntergerError);return!0},e.isFieldOrder=function(e){if(-1===r.OrderDirectionList.indexOf(e))throw new Error(r.ErrorCode.DirectionError);return!0},e.isFieldPath=function(e){if(!/^[a-zA-Z0-9-_\.]/.test(e))throw new Error;return!0},e.isOperator=function(e){if(-1===r.WhereFilterOpList.indexOf(e))throw new Error(r.ErrorCode.OpStrError);return!0},e.isCollName=function(e){if(!/^[a-zA-Z0-9]([a-zA-Z0-9-_]){1,32}$/.test(e))throw new Error(r.ErrorCode.CollNameError);return!0},e.isDocID=function(e){if(!/^([a-fA-F0-9]){24}$/.test(e))throw new Error(r.ErrorCode.DocIDError);return!0},e}();t.Validate=i},function(e,t,n){"use strict";var r,o;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.DocIDError="文档ID不合法",e.CollNameError="集合名称不合法",e.OpStrError="操作符不合法",e.DirectionError="排序字符不合法",e.IntergerError="must be integer"}(o||(o={})),t.ErrorCode=o;t.FieldType={String:"String",Number:"Number",Object:"Object",Array:"Array",Boolean:"Boolean",Null:"Null",GeoPoint:"GeoPoint",GeoLineString:"GeoLineString",GeoPolygon:"GeoPolygon",GeoMultiPoint:"GeoMultiPoint",GeoMultiLineString:"GeoMultiLineString",GeoMultiPolygon:"GeoMultiPolygon",Timestamp:"Date",Command:"Command",ServerDate:"ServerDate"};t.OrderDirectionList=["desc","asc"];var i;t.WhereFilterOpList=["<","<=","==",">=",">"],function(e){e.lt="<",e.gt=">",e.lte="<=",e.gte=">=",e.eq="=="}(i||(i={})),t.Opeartor=i;var a=((r={})[i.eq]="$eq",r[i.lt]="$lt",r[i.lte]="$lte",r[i.gt]="$gt",r[i.gte]="$gte",r);t.OperatorMap=a;t.UpdateOperatorList=["$set","$inc","$mul","$unset","$push","$pop","$unshift","$shift","$currentDate","$each","$position"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),i=n(43),a=function(){function e(e){if(!o.isArray(e))throw new TypeError('"lines" must be of type LineString[]. Received type '+typeof e);if(0===e.length)throw new Error("Polygon must contain 1 linestring at least");e.forEach(function(e){if(!(e instanceof i.LineString))throw new TypeError('"lines" must be of type LineString[]. Received type '+typeof e+"[]");if(!i.LineString.isClosed(e))throw new Error("LineString "+e.points.map(function(e){return e.toReadableString()})+" is not a closed cycle")}),this.lines=e}return e.prototype.parse=function(e){var t;return(t={})[e]={type:"Polygon",coordinates:this.lines.map(function(e){return e.points.map(function(e){return[e.longitude,e.latitude]})})},t},e.prototype.toJSON=function(){return{type:"Polygon",coordinates:this.lines.map(function(e){return e.points.map(function(e){return[e.longitude,e.latitude]})})}},e.validate=function(e){if("Polygon"!==e.type||!o.isArray(e.coordinates))return!1;for(var t=0,n=e.coordinates;t<n.length;t++){var r=n[t];if(!this.isCloseLineString(r))return!1;for(var i=0,a=r;i<a.length;i++){var u=a[i];if(!o.isNumber(u[0])||!o.isNumber(u[1]))return!1}}return!0},e.isCloseLineString=function(e){var t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]},Object.defineProperty(e.prototype,"_internalType",{get:function(){return r.SYMBOL_GEO_MULTI_POLYGON},enumerable:!0,configurable:!0}),e}();t.Polygon=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPromiseCallback=function(){var e;if(!Promise){(e=function(){}).promise={};var t=function(){throw new Error('Your Node runtime does support ES6 Promises. Set "global.Promise" to your preferred implementation of promises.')};return Object.defineProperty(e.promise,"then",{get:t}),Object.defineProperty(e.promise,"catch",{get:t}),e}var n=new Promise(function(t,n){e=function(e,r){return e?n(e):t(r)}});return e.promise=n,e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20),o=n(0),i=n(2),a=n(66),u=n(67),s=function(){function e(){}return e.encode=function(t){return(new e).encodeUpdate(t)},e.prototype.encodeUpdate=function(e){return r.isUpdateCommand(e)?this.encodeUpdateCommand(e):"object"===i.getType(e)?this.encodeUpdateObject(e):e},e.prototype.encodeUpdateCommand=function(e){if(e.fieldName===o.SYMBOL_UNSET_FIELD_NAME)throw new Error("Cannot encode a comparison command with unset field name");switch(e.operator){case r.UPDATE_COMMANDS_LITERAL.SET:case r.UPDATE_COMMANDS_LITERAL.REMOVE:case r.UPDATE_COMMANDS_LITERAL.INC:case r.UPDATE_COMMANDS_LITERAL.MUL:return this.encodeFieldUpdateCommand(e);case r.UPDATE_COMMANDS_LITERAL.PUSH:case r.UPDATE_COMMANDS_LITERAL.POP:case r.UPDATE_COMMANDS_LITERAL.SHIFT:case r.UPDATE_COMMANDS_LITERAL.UNSHIFT:return this.encodeArrayUpdateCommand(e);default:return this.encodeFieldUpdateCommand(e)}},e.prototype.encodeFieldUpdateCommand=function(e){var t,n,o,i,u=a.operatorToString(e.operator);switch(e.operator){case r.UPDATE_COMMANDS_LITERAL.REMOVE:return(t={})[u]=((n={})[e.fieldName]="",n),t;case r.UPDATE_COMMANDS_LITERAL.SET:case r.UPDATE_COMMANDS_LITERAL.INC:case r.UPDATE_COMMANDS_LITERAL.MUL:default:return(o={})[u]=((i={})[e.fieldName]=e.operands[0],i),o}},e.prototype.encodeArrayUpdateCommand=function(e){var t,n,o,i,s,c,f,p,l,d,h=a.operatorToString(e.operator);switch(e.operator){case r.UPDATE_COMMANDS_LITERAL.PUSH:var y={$each:e.operands.map(u.encodeInternalDataType)};return(t={})[h]=((n={})[e.fieldName]=y,n),t;case r.UPDATE_COMMANDS_LITERAL.UNSHIFT:y={$each:e.operands.map(u.encodeInternalDataType),$position:0};return(o={})[h]=((i={})[e.fieldName]=y,i),o;case r.UPDATE_COMMANDS_LITERAL.POP:return(s={})[h]=((c={})[e.fieldName]=1,c),s;case r.UPDATE_COMMANDS_LITERAL.SHIFT:return(f={})[h]=((p={})[e.fieldName]=-1,p),f;default:return(l={})[h]=((d={})[e.fieldName]=u.encodeInternalDataType(e.operands),d),l}},e.prototype.encodeUpdateObject=function(e){var t=u.flattenQueryObject(e);for(var n in t)if(!/^\$/.test(n)){var o=t[n];if(r.isUpdateCommand(o)){t[n]=o._setFieldName(n);var i=this.encodeUpdateCommand(t[n]);u.mergeConditionAfterEncode(t,i,n)}else{t[n]=o=u.encodeInternalDataType(o);var a=new r.UpdateCommand(r.UPDATE_COMMANDS_LITERAL.SET,[o],n);i=this.encodeUpdateCommand(a);u.mergeConditionAfterEncode(t,i,n)}}return t},e}();t.UpdateSerializer=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21),o=n(22),i=n(20);for(var a in t.OperatorMap={},r.QUERY_COMMANDS_LITERAL)t.OperatorMap[a]="$"+a.toLowerCase();for(var a in o.LOGIC_COMMANDS_LITERAL)t.OperatorMap[a]="$"+a.toLowerCase();for(var a in i.UPDATE_COMMANDS_LITERAL)t.OperatorMap[a]="$"+a.toLowerCase();t.OperatorMap[r.QUERY_COMMANDS_LITERAL.NEQ]="$ne",t.OperatorMap[i.UPDATE_COMMANDS_LITERAL.REMOVE]="$unset",t.OperatorMap[i.UPDATE_COMMANDS_LITERAL.SHIFT]="$pop",t.OperatorMap[i.UPDATE_COMMANDS_LITERAL.UNSHIFT]="$push",t.operatorToString=function(e){return t.OperatorMap[e]||"$"+e.toLowerCase()}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(68);function a(e,t,n,i){var u=r({},e);for(var s in e)if(!/^\$/.test(s)){var c=e[s];if(c&&o.isObject(c)&&!t(c)){if(i.indexOf(c)>-1)throw new Error("Cannot convert circular structure to JSON");var f=a(c,t,n.concat([s]),i.concat([c]));u[s]=f;var p=!1;for(var l in f)/^\$/.test(l)?p=!0:(u[s+"."+l]=f[l],delete u[s][l]);p||delete u[s]}}return u}function u(e){return o.isInternalObject(e)||o.isDate(e)||o.isRegExp(e)}t.flattenQueryObject=function(e){return a(e,u,[],[e])},t.flattenObject=function(e){return a(e,function(e){return!1},[],[e])},t.mergeConditionAfterEncode=function(e,t,n){for(var r in t[n]||delete e[n],t)e[r]?o.isArray(e[r])?e[r].push(t[r]):o.isObject(e[r])?o.isObject(t[r])?Object.assign(e[r],t[r]):(console.warn("unmergable condition, query is object but condition is "+o.getType(t)+", can only overwrite",t,n),e[r]=t[r]):(console.warn("to-merge query is of type "+o.getType(e)+", can only overwrite",e,t,n),e[r]=t[r]):e[r]=t[r]},t.isConversionRequired=u,t.encodeInternalDataType=function(e){return i.serialize(e)},t.decodeInternalDataType=function(e){return i.deserialize(e)}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(2),a=n(19),u=n(41);t.serialize=function(e){return function e(t,n){if(!i.isInternalObject(t)){if(i.isDate(t))return{$date:+t};if(i.isRegExp(t))return{$regex:t.source,$options:t.flags};if(i.isArray(t))return t.map(function(t){if(n.indexOf(t)>-1)throw new Error("Cannot convert circular structure to JSON");return e(t,n.concat([t]))});if(i.isObject(t)){var a=r({},t);for(var u in a){if(n.indexOf(a[u])>-1)throw new Error("Cannot convert circular structure to JSON");a[u]=e(a[u],n.concat([a[u]]))}return a}return t}switch(t._internalType){case o.SYMBOL_GEO_POINT:return t.toJSON();case o.SYMBOL_SERVER_DATE:case o.SYMBOL_REGEXP:return t.parse();default:return t.toJSON?t.toJSON():t}}(e,[e])},t.deserialize=function(e){var t=r({},e);for(var n in t)switch(n){case"$date":switch(i.getType(t[n])){case"number":return new Date(t[n]);case"object":return new u.ServerDate(t[n])}break;case"type":switch(t.type){case"Point":if(i.isArray(t.coordinates)&&i.isNumber(t.coordinates[0])&&i.isNumber(t.coordinates[1]))return new a.Point(t.coordinates[0],t.coordinates[1])}}return e}},function(e,t,n){e.exports=n(70)},function(e,t,n){"use strict";var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(71),i=n(121),a=n(124),u=n(11),s=n(125).Db;function c(e){this.config=e||this.config}function f(e,t){return function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}(t,function(n,r){e[r]=t[r]}),e}c.prototype.init=function(e){return this.config={env:e.env,timeout:e.timeout||15e3},new c(this.config)},c.prototype.database=function(e){return s.reqClass=u.Request,new s(r({},this.config,e))},c.prototype.auth=function(e){var t=(void 0===e?{}:e).persistence;return Object.assign(this.config,{persistence:t||"session"}),new i.default(this.config)},f(c.prototype,a),f(c.prototype,o);var p=new c;try{window.tcb=p}catch(e){}t.default=p,e.exports=p},function(e,t,n){"use strict";var r,o=n(72),i=(r=o)&&r.__esModule?r:{default:r};Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),u=n(18),s=n(54);t.uploadFile=function(e,t){var n=e.cloudPath,r=e.filePath,o=e.onUploadProgress;t=t||u.createPromiseCallback();var i={path:n,file:r,onUploadProgress:o};return new a.Request(this.config).send("storage.uploadFile",i).then(function(e){e.code?t(0,e):t(0,{fileID:e.data.fileid,requestId:e.requestId})}).catch(function(e){t(e)}),t.promise},t.deleteFile=function(e,t){var n=e.fileList;if(t=t||u.createPromiseCallback(),!n||!Array.isArray(n))return{code:"INVALID_PARAM",message:"fileList必须是非空的数组"};for(var r=0,o=n;r<o.length;r++){var i=o[r];if(!i||"string"!=typeof i)return{code:"INVALID_PARAM",message:"fileList的元素必须是非空的字符串"}}var s={fileid_list:n};return new a.Request(this.config).send("storage.batchDeleteFile",s).then(function(e){e.code?t(0,e):t(0,{fileList:e.data.delete_list,requestId:e.requestId})}).catch(function(e){t(e)}),t.promise},t.getTempFileURL=function(e,t){var n=e.fileList;t=t||u.createPromiseCallback(),n&&Array.isArray(n)||t(0,{code:"INVALID_PARAM",message:"fileList必须是非空的数组"});for(var r=[],o=0,s=n;o<s.length;o++){var c=s[o];"object"===(void 0===c?"undefined":(0,i.default)(c))?(c.hasOwnProperty("fileID")&&c.hasOwnProperty("maxAge")||t(0,{code:"INVALID_PARAM",message:"fileList的元素必须是包含fileID和maxAge的对象"}),r.push({fileid:c.fileID,max_age:c.maxAge})):"string"==typeof c?r.push({fileid:c}):t(0,{code:"INVALID_PARAM",message:"fileList的元素必须是字符串"})}var f={file_list:r};return new a.Request(this.config).send("storage.batchGetDownloadUrl",f).then(function(e){e.code?t(0,e):t(0,{fileList:e.data.download_list,requestId:e.requestId})}).catch(function(e){t(e)}),t.promise},t.downloadFile=function(e,n){var r=e.fileID;return n=n||u.createPromiseCallback(),t.getTempFileURL.call(this,{fileList:[{fileID:r,maxAge:600}]}).then(function(e){var t=e.fileList[0];if("SUCCESS"===t.code){var r=t.download_url;r=encodeURI(r),s.default.get(r,{responseType:"blob"}).then(function(e){var t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download","file.pdf"),document.body.appendChild(n),n.click()})}else n(t)}),n.promise}},function(e,t,n){"use strict";t.__esModule=!0;var r=a(n(73)),o=a(n(92)),i="function"==typeof o.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof o.default&&e.constructor===o.default&&e!==o.default.prototype?"symbol":typeof e};function a(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof o.default&&"symbol"===i(r.default)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof o.default&&e.constructor===o.default&&e!==o.default.prototype?"symbol":void 0===e?"undefined":i(e)}},function(e,t,n){e.exports={default:n(74),__esModule:!0}},function(e,t,n){n(75),n(88),e.exports=n(32).f("iterator")},function(e,t,n){"use strict";var r=n(76)(!0);n(44)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var r=n(23),o=n(24);e.exports=function(e){return function(t,n){var i,a,u=String(o(t)),s=r(n),c=u.length;return s<0||s>=c?e?"":void 0:(i=u.charCodeAt(s))<55296||i>56319||s+1===c||(a=u.charCodeAt(s+1))<56320||a>57343?e?u.charAt(s):i:e?u.slice(s,s+2):a-56320+(i-55296<<10)+65536}}},function(e,t,n){var r=n(78);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";var r=n(49),o=n(16),i=n(31),a={};n(5)(a,n(9)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:o(1,n)}),i(e,t+" Iterator")}},function(e,t,n){var r=n(6),o=n(14),i=n(27);e.exports=n(7)?Object.defineProperties:function(e,t){o(e);for(var n,a=i(t),u=a.length,s=0;u>s;)r.f(e,n=a[s++],t[n]);return e}},function(e,t,n){var r=n(51);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(8),o=n(83),i=n(84);e.exports=function(e){return function(t,n,a){var u,s=r(t),c=o(s.length),f=i(a,c);if(e&&n!=n){for(;c>f;)if((u=s[f++])!=u)return!0}else for(;c>f;f++)if((e||f in s)&&s[f]===n)return e||f||0;return!e&&-1}}},function(e,t,n){var r=n(23),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){var r=n(23),o=Math.max,i=Math.min;e.exports=function(e,t){return(e=r(e))<0?o(e+t,0):i(e,t)}},function(e,t,n){var r=n(3).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(4),o=n(87),i=n(28)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(24);e.exports=function(e){return Object(r(e))}},function(e,t,n){n(89);for(var r=n(3),o=n(5),i=n(26),a=n(9)("toStringTag"),u="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),s=0;s<u.length;s++){var c=u[s],f=r[c],p=f&&f.prototype;p&&!p[a]&&o(p,a,c),i[c]=i.Array}},function(e,t,n){"use strict";var r=n(90),o=n(91),i=n(26),a=n(8);e.exports=n(44)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):o(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){e.exports={default:n(93),__esModule:!0}},function(e,t,n){n(94),n(100),n(101),n(102),e.exports=n(13).Symbol},function(e,t,n){"use strict";var r=n(3),o=n(4),i=n(7),a=n(45),u=n(48),s=n(95).KEY,c=n(15),f=n(29),p=n(31),l=n(17),d=n(9),h=n(32),y=n(33),m=n(96),v=n(97),_=n(14),g=n(10),O=n(8),b=n(25),w=n(16),E=n(49),S=n(98),T=n(99),L=n(6),M=n(27),A=T.f,P=L.f,N=S.f,C=r.Symbol,I=r.JSON,D=I&&I.stringify,R=d("_hidden"),j=d("toPrimitive"),x={}.propertyIsEnumerable,U=f("symbol-registry"),q=f("symbols"),F=f("op-symbols"),G=Object.prototype,k="function"==typeof C,Y=r.QObject,Q=!Y||!Y.prototype||!Y.prototype.findChild,B=i&&c(function(){return 7!=E(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=A(G,t);r&&delete G[t],P(e,t,n),r&&e!==G&&P(G,t,r)}:P,$=function(e){var t=q[e]=E(C.prototype);return t._k=e,t},H=k&&"symbol"==typeof C.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof C},V=function(e,t,n){return e===G&&V(F,t,n),_(e),t=b(t,!0),_(n),o(q,t)?(n.enumerable?(o(e,R)&&e[R][t]&&(e[R][t]=!1),n=E(n,{enumerable:w(0,!1)})):(o(e,R)||P(e,R,w(1,{})),e[R][t]=!0),B(e,t,n)):P(e,t,n)},J=function(e,t){_(e);for(var n,r=m(t=O(t)),o=0,i=r.length;i>o;)V(e,n=r[o++],t[n]);return e},z=function(e){var t=x.call(this,e=b(e,!0));return!(this===G&&o(q,e)&&!o(F,e))&&(!(t||!o(this,e)||!o(q,e)||o(this,R)&&this[R][e])||t)},W=function(e,t){if(e=O(e),t=b(t,!0),e!==G||!o(q,t)||o(F,t)){var n=A(e,t);return!n||!o(q,t)||o(e,R)&&e[R][t]||(n.enumerable=!0),n}},K=function(e){for(var t,n=N(O(e)),r=[],i=0;n.length>i;)o(q,t=n[i++])||t==R||t==s||r.push(t);return r},X=function(e){for(var t,n=e===G,r=N(n?F:O(e)),i=[],a=0;r.length>a;)!o(q,t=r[a++])||n&&!o(G,t)||i.push(q[t]);return i};k||(u((C=function(){if(this instanceof C)throw TypeError("Symbol is not a constructor!");var e=l(arguments.length>0?arguments[0]:void 0),t=function(n){this===G&&t.call(F,n),o(this,R)&&o(this[R],e)&&(this[R][e]=!1),B(this,e,w(1,n))};return i&&Q&&B(G,e,{configurable:!0,set:t}),$(e)}).prototype,"toString",function(){return this._k}),T.f=W,L.f=V,n(53).f=S.f=K,n(34).f=z,n(52).f=X,i&&!n(12)&&u(G,"propertyIsEnumerable",z,!0),h.f=function(e){return $(d(e))}),a(a.G+a.W+a.F*!k,{Symbol:C});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;Z.length>ee;)d(Z[ee++]);for(var te=M(d.store),ne=0;te.length>ne;)y(te[ne++]);a(a.S+a.F*!k,"Symbol",{for:function(e){return o(U,e+="")?U[e]:U[e]=C(e)},keyFor:function(e){if(!H(e))throw TypeError(e+" is not a symbol!");for(var t in U)if(U[t]===e)return t},useSetter:function(){Q=!0},useSimple:function(){Q=!1}}),a(a.S+a.F*!k,"Object",{create:function(e,t){return void 0===t?E(e):J(E(e),t)},defineProperty:V,defineProperties:J,getOwnPropertyDescriptor:W,getOwnPropertyNames:K,getOwnPropertySymbols:X}),I&&a(a.S+a.F*(!k||c(function(){var e=C();return"[null]"!=D([e])||"{}"!=D({a:e})||"{}"!=D(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=t=r[1],(g(t)||void 0!==e)&&!H(e))return v(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!H(t))return t}),r[1]=t,D.apply(I,r)}}),C.prototype[j]||n(5)(C.prototype,j,C.prototype.valueOf),p(C,"Symbol"),p(Math,"Math",!0),p(r.JSON,"JSON",!0)},function(e,t,n){var r=n(17)("meta"),o=n(10),i=n(4),a=n(6).f,u=0,s=Object.isExtensible||function(){return!0},c=!n(15)(function(){return s(Object.preventExtensions({}))}),f=function(e){a(e,r,{value:{i:"O"+ ++u,w:{}}})},p=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!s(e))return"F";if(!t)return"E";f(e)}return e[r].i},getWeak:function(e,t){if(!i(e,r)){if(!s(e))return!0;if(!t)return!1;f(e)}return e[r].w},onFreeze:function(e){return c&&p.NEED&&s(e)&&!i(e,r)&&f(e),e}}},function(e,t,n){var r=n(27),o=n(52),i=n(34);e.exports=function(e){var t=r(e),n=o.f;if(n)for(var a,u=n(e),s=i.f,c=0;u.length>c;)s.call(e,a=u[c++])&&t.push(a);return t}},function(e,t,n){var r=n(51);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(8),o=n(53).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?function(e){try{return o(e)}catch(e){return a.slice()}}(e):o(r(e))}},function(e,t,n){var r=n(34),o=n(16),i=n(8),a=n(25),u=n(4),s=n(46),c=Object.getOwnPropertyDescriptor;t.f=n(7)?c:function(e,t){if(e=i(e),t=a(t,!0),s)try{return c(e,t)}catch(e){}if(u(e,t))return o(!r.f.call(e,t),e[t])}},function(e,t){},function(e,t,n){n(33)("asyncIterator")},function(e,t,n){n(33)("observable")},function(e,t,n){"use strict";var r=n(1),o=n(55),i=n(105),a=n(35);function u(e){var t=new i(e),n=o(i.prototype.request,t);return r.extend(n,i.prototype,t),r.extend(n,t),n}var s=u(a);s.Axios=i,s.create=function(e){return u(r.merge(a,e))},s.Cancel=n(60),s.CancelToken=n(119),s.isCancel=n(59),s.all=function(e){return Promise.all(e)},s.spread=n(120),e.exports=s,e.exports.default=s},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,n){"use strict";var r=n(35),o=n(1),i=n(114),a=n(115);function u(e){this.defaults=e,this.interceptors={request:new i,response:new i}}u.prototype.request=function(e){"string"==typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),(e=o.merge(r,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[a,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},o.forEach(["delete","get","head","options"],function(e){u.prototype[e]=function(t,n){return this.request(o.merge(n||{},{method:e,url:t}))}}),o.forEach(["post","put","patch"],function(e){u.prototype[e]=function(t,n,r){return this.request(o.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=u},function(e,t,n){"use strict";var r=n(1);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){"use strict";var r=n(58);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e}},function(e,t,n){"use strict";var r=n(1);function o(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var a=[];r.forEach(t,function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(o(t)+"="+o(e))}))}),i=a.join("&")}return i&&(e+=(-1===e.indexOf("?")?"?":"&")+i),e}},function(e,t,n){"use strict";var r=n(1),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,a={};return e?(r.forEach(e.split("\n"),function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(a[t]&&o.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}}),a):a}},function(e,t,n){"use strict";var r=n(1);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=r.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function o(){this.message="String contains an invalid character"}o.prototype=new Error,o.prototype.code=5,o.prototype.name="InvalidCharacterError",e.exports=function(e){for(var t,n,i=String(e),a="",u=0,s=r;i.charAt(0|u)||(s="=",u%1);a+=s.charAt(63&t>>8-u%1*8)){if((n=i.charCodeAt(u+=.75))>255)throw new o;t=t<<8|n}return a}},function(e,t,n){"use strict";var r=n(1);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,o,i,a){var u=[];u.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),r.isString(o)&&u.push("path="+o),r.isString(i)&&u.push("domain="+i),!0===a&&u.push("secure"),document.cookie=u.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(1);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){r.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=o},function(e,t,n){"use strict";var r=n(1),o=n(116),i=n(59),a=n(35),u=n(117),s=n(118);function c(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return c(e),e.baseURL&&!u(e.url)&&(e.url=s(e.baseURL,e.url)),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||a.adapter)(e).then(function(t){return c(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(t){return i(t)||(c(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){"use strict";var r=n(1);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(60);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new r(e),t(n.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o(function(t){e=t}),cancel:e}},e.exports=o},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),i=n(122),a=n(37),u=n(36),s=function(){function e(e){this.httpRequest=new o.Request(e),this.config=e}return e.prototype.weixinAuthProvider=function(e){var t=e.appid,n=e.scope,r=e.loginMode,o=e.state;return new i.default(this.config,t,n,r,o)},e.prototype.signOut=function(){new a.Cache(this.config.persistence).removeStore(u.JWT_KEY+"_"+this.config.env)},e.prototype.getUserInfo=function(){return this.httpRequest.send("auth.getUserInfo",{}).then(function(e){return e.code?e:r({},e.data,{requestId:e.seqId})})},e}();t.default=s},function(e,t,n){"use strict";var r,o=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i,a,u=n(18),s=n(123);!function(e){e.snsapi_base="snsapi_base",e.snsapi_userinfo="snsapi_userinfo",e.snsapi_login="snsapi_login"}(i||(i={})),function(e){e.redirect="redirect",e.prompt="prompt"}(a||(a={}));var c=function(e){function t(t,n,r,o,i){var a=e.call(this,t)||this;return a.config=t,a.appid=n,a.scope=r,a.state=i||"weixin",a.loginMode=o||"redirect",a}return o(t,e),t.prototype.signIn=function(e){e=e||u.createPromiseCallback();var t=this.cache.getStore(this.localKey),n=u.getQuery("code")||u.getHash("code");if(t)return e(0),e.promise;if(n){var r="snsapi_login"===this.scope?"WECHAT-OPEN":"WECHAT-PUBLIC";return this.getJwt(this.appid,r).then(function(t){e(0,t)}),e.promise}if(!1===Object.values(i).includes(i[this.scope]))throw new Error("错误的scope类型");this.redirect()},t.prototype.redirect=function(){var e=u.removeParam("code",location.href);e=u.removeParam("state",e),e=encodeURIComponent(e);var t="//open.weixin.qq.com/connect/oauth2/authorize";"snsapi_login"===this.scope&&(t="//open.weixin.qq.com/connect/qrconnect"),"redirect"===a[this.loginMode]&&(location.href=t+"?appid="+this.appid+"&redirect_uri="+e+"&response_type=code&scope="+this.scope+"&state="+this.state+"#wechat_redirect")},t}(s.default);t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),o=n(37),i=n(36),a=function(){function e(e){this.httpRequest=new r.Request(e),this.cache=new o.Cache(e.persistence),this.localKey=i.JWT_KEY+"_"+e.env}return e.prototype.getJwt=function(e,t){var n=this;return this.httpRequest.send("auth.getJwt",{appid:e,loginType:t}).then(function(e){return e.token&&n.cache.setStore(n.localKey,e.token),e})},e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),o=n(18);t.callFunction=function(e,t){var n=e.name,i=e.data;t=t||o.createPromiseCallback();try{i=i?JSON.stringify(i):""}catch(e){return Promise.reject(e)}if(!n)return Promise.reject(new Error("函数名不能为空"));var a={function_name:n,request_data:i};return new r.Request(this.config).send("functions.invokeFunction",a).then(function(e){if(console.log(e),e.code)t(0,e);else{var n=e.data.response_data;try{n=JSON.parse(e.data.response_data),t(0,{result:n,requestId:e.requestId})}catch(e){t(new Error("response data must be json"))}}return t.promise}).catch(function(e){t(e)}),t.promise}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(38))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(39),i=n(2),a=function(){function e(e){if(!i.isArray(e))throw new TypeError('"points" must be of type Point[]. Received type '+typeof e);if(0===e.length)throw new Error('"points" must contain 1 point at least');e.forEach(function(e){if(!(e instanceof o.Point))throw new TypeError('"points" must be of type Point[]. Received type '+typeof e+"[]")}),this.points=e}return e.prototype.parse=function(e){var t;return(t={})[e]={type:"MultiPoint",coordinates:this.points.map(function(e){return e.toJSON().coordinates})},t},e.prototype.toJSON=function(){return{type:"MultiPoint",coordinates:this.points.map(function(e){return e.toJSON().coordinates})}},e.validate=function(e){if("MultiPoint"!==e.type||!i.isArray(e.coordinates))return!1;for(var t=0,n=e.coordinates;t<n.length;t++){var r=n[t];if(!i.isNumber(r[0])||!i.isNumber(r[1]))return!1}return!0},Object.defineProperty(e.prototype,"_internalType",{get:function(){return r.SYMBOL_GEO_MULTI_POINT},enumerable:!0,configurable:!0}),e}();t.MultiPoint=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),i=n(43),a=function(){function e(e){if(!o.isArray(e))throw new TypeError('"lines" must be of type LineString[]. Received type '+typeof e);if(0===e.length)throw new Error("Polygon must contain 1 linestring at least");e.forEach(function(e){if(!(e instanceof i.LineString))throw new TypeError('"lines" must be of type LineString[]. Received type '+typeof e+"[]")}),this.lines=e}return e.prototype.parse=function(e){var t;return(t={})[e]={type:"MultiLineString",coordinates:this.lines.map(function(e){return e.points.map(function(e){return[e.longitude,e.latitude]})})},t},e.prototype.toJSON=function(){return{type:"MultiLineString",coordinates:this.lines.map(function(e){return e.points.map(function(e){return[e.longitude,e.latitude]})})}},e.validate=function(e){if("MultiLineString"!==e.type||!o.isArray(e.coordinates))return!1;for(var t=0,n=e.coordinates;t<n.length;t++)for(var r=0,i=n[t];r<i.length;r++){var a=i[r];if(!o.isNumber(a[0])||!o.isNumber(a[1]))return!1}return!0},Object.defineProperty(e.prototype,"_internalType",{get:function(){return r.SYMBOL_GEO_MULTI_LINE_STRING},enumerable:!0,configurable:!0}),e}();t.MultiLineString=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(2),i=n(63),a=function(){function e(e){if(!o.isArray(e))throw new TypeError('"polygons" must be of type Polygon[]. Received type '+typeof e);if(0===e.length)throw new Error("MultiPolygon must contain 1 polygon at least");for(var t=0,n=e;t<n.length;t++){var r=n[t];if(!(r instanceof i.Polygon))throw new TypeError('"polygon" must be of type Polygon[]. Received type '+typeof r+"[]")}this.polygons=e}return e.prototype.parse=function(e){var t;return(t={})[e]={type:"MultiPolygon",coordinates:this.polygons.map(function(e){return e.lines.map(function(e){return e.points.map(function(e){return[e.longitude,e.latitude]})})})},t},e.prototype.toJSON=function(){return{type:"MultiPolygon",coordinates:this.polygons.map(function(e){return e.lines.map(function(e){return e.points.map(function(e){return[e.longitude,e.latitude]})})})}},e.validate=function(e){if("MultiPolygon"!==e.type||!o.isArray(e.coordinates))return!1;for(var t=0,n=e.coordinates;t<n.length;t++)for(var r=0,i=n[t];r<i.length;r++)for(var a=0,u=i[r];a<u.length;a++){var s=u[a];if(!o.isNumber(s[0])||!o.isNumber(s[1]))return!1}return!0},Object.defineProperty(e.prototype,"_internalType",{get:function(){return r.SYMBOL_GEO_POLYGON},enumerable:!0,configurable:!0}),e}();t.MultiPolygon=a},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(130),a=function(e){function t(t,n){return e.call(this,t,n)||this}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return this._coll},enumerable:!0,configurable:!0}),t.prototype.doc=function(e){return new i.DocumentReference(this._db,this._coll,e)},t.prototype.add=function(e,t){return this.doc().create(e,t)},t}(n(131).Query);t.CollectionReference=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(64),o=n(38),i=n(40),a=n(65),u=n(68),s=n(20),c=function(){function e(e,t,n,r){void 0===r&&(r={}),this._db=e,this._coll=t,this.id=n,this.request=new o.Db.reqClass(this._db.config),this.projection=r}return e.prototype.create=function(e,t){t=t||r.createPromiseCallback();var n={collectionName:this._coll,data:u.serialize(e)};return this.id&&(n._id=this.id),this.request.send("database.addDocument",n).then(function(e){e.code?t(0,e):t(0,{id:e.data._id,requestId:e.requestId})}).catch(function(e){t(e)}),t.promise},e.prototype.set=function(e,t){if(t=t||r.createPromiseCallback(),!e||"object"!=typeof e)return Promise.resolve({code:"INVALID_PARAM",message:"参数必需是非空对象"});if(e.hasOwnProperty("_id"))return Promise.resolve({code:"INVALID_PARAM",message:"不能更新_id的值"});var n=!1,o=function(e){if("object"==typeof e)for(var t in e)e[t]instanceof s.UpdateCommand?n=!0:"object"==typeof e[t]&&o(e[t])};if(o(e),n)return Promise.resolve({code:"DATABASE_REQUEST_FAILED",message:"update operator complicit"});var i={collectionName:this._coll,data:u.serialize(e),multi:!1,merge:!1,upsert:!0};return this.id&&(i.query={_id:this.id}),this.request.send("database.updateDocument",i).then(function(e){e.code?t(0,e):t(0,{updated:e.data.updated,upsertedId:e.data.upserted_id,requestId:e.requestId})}).catch(function(e){t(e)}),t.promise},e.prototype.update=function(e,t){if(t=t||r.createPromiseCallback(),!e||"object"!=typeof e)return Promise.resolve({code:"INVALID_PARAM",message:"参数必需是非空对象"});if(e.hasOwnProperty("_id"))return Promise.resolve({code:"INVALID_PARAM",message:"不能更新_id的值"});var n={_id:this.id},o={collectionName:this._coll,data:a.UpdateSerializer.encode(e),query:n,multi:!1,merge:!0,upsert:!1};return this.request.send("database.updateDocument",o).then(function(e){e.code?t(0,e):t(0,{updated:e.data.updated,upsertedId:e.data.upserted_id,requestId:e.requestId})}).catch(function(e){t(e)}),t.promise},e.prototype.remove=function(e){e=e||r.createPromiseCallback();var t={_id:this.id},n={collectionName:this._coll,query:t,multi:!1};return this.request.send("database.deleteDocument",n).then(function(t){t.code?e(0,t):e(0,{deleted:t.data.deleted,requestId:t.requestId})}).catch(function(t){e(t)}),e.promise},e.prototype.get=function(e){e=e||r.createPromiseCallback();var t={_id:this.id},n={collectionName:this._coll,query:t,multi:!1,projection:this.projection};return this.request.send("database.queryDocument",n).then(function(t){if(t.code)e(0,t);else{var n=i.Util.formatResDocumentData(t.data.list);e(0,{data:n,requestId:t.requestId,total:t.TotalCount,limit:t.Limit,offset:t.Offset})}}).catch(function(t){e(t)}),e.promise},e.prototype.field=function(t){for(var n in t)t[n]?t[n]=1:t[n]=0;return new e(this._db,this._coll,this.id,t)},e}();t.DocumentReference=c},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(64),i=n(38),a=n(61),u=n(40),s=n(132),c=n(65),f=function(){function e(e,t,n,r,o){this._db=e,this._coll=t,this._fieldFilters=n,this._fieldOrders=r||[],this._queryOptions=o||{},this._request=new i.Db.reqClass(this._db.config)}return e.prototype.get=function(e){e=e||o.createPromiseCallback();var t=[];this._fieldOrders&&this._fieldOrders.forEach(function(e){t.push(e)});var n={collectionName:this._coll};return this._fieldFilters&&(n.query=this._fieldFilters),t.length>0&&(n.order=t),this._queryOptions.offset&&(n.offset=this._queryOptions.offset),this._queryOptions.limit?n.limit=this._queryOptions.limit<100?this._queryOptions.limit:100:n.limit=100,this._queryOptions.projection&&(n.projection=this._queryOptions.projection),this._request.send("database.queryDocument",n).then(function(t){if(t.code)e(0,t);else{var n={data:u.Util.formatResDocumentData(t.data.list),requestId:t.requestId};t.TotalCount&&(n.total=t.TotalCount),t.Limit&&(n.limit=t.Limit),t.Offset&&(n.offset=t.Offset),e(0,n)}}).catch(function(t){e(t)}),e.promise},e.prototype.count=function(e){e=e||o.createPromiseCallback();var t={collectionName:this._coll};return this._fieldFilters&&(t.query=this._fieldFilters),this._request.send("database.countDocument",t).then(function(t){t.code?e(0,t):e(0,{requestId:t.requestId,total:t.data.total})}),e.promise},e.prototype.where=function(t){return new e(this._db,this._coll,s.QuerySerializer.encode(t),this._fieldOrders,this._queryOptions)},e.prototype.orderBy=function(t,n){a.Validate.isFieldPath(t),a.Validate.isFieldOrder(n);var r={field:t,direction:n},o=this._fieldOrders.concat(r);return new e(this._db,this._coll,this._fieldFilters,o,this._queryOptions)},e.prototype.limit=function(t){a.Validate.isInteger("limit",t);var n=r({},this._queryOptions);return n.limit=t,new e(this._db,this._coll,this._fieldFilters,this._fieldOrders,n)},e.prototype.skip=function(t){a.Validate.isInteger("offset",t);var n=r({},this._queryOptions);return n.offset=t,new e(this._db,this._coll,this._fieldFilters,this._fieldOrders,n)},e.prototype.update=function(e,t){if(t=t||o.createPromiseCallback(),!e||"object"!=typeof e)return Promise.resolve({code:"INVALID_PARAM",message:"参数必需是非空对象"});if(e.hasOwnProperty("_id"))return Promise.resolve({code:"INVALID_PARAM",message:"不能更新_id的值"});var n={collectionName:this._coll,query:this._fieldFilters,multi:!0,merge:!0,upsert:!1,data:c.UpdateSerializer.encode(e)};return this._request.send("database.updateDocument",n).then(function(e){e.code?t(0,e):t(0,{requestId:e.requestId,updated:e.data.updated,upsertId:e.data.upsert_id})}),t.promise},e.prototype.field=function(t){for(var n in t)t[n]?t[n]=1:t[n]=0;var o=r({},this._queryOptions);return o.projection=t,new e(this._db,this._coll,this._fieldFilters,this._fieldOrders,o)},e.prototype.remove=function(e){e=e||o.createPromiseCallback(),Object.keys(this._queryOptions).length>0&&console.warn("`offset`, `limit` and `projection` are not supported in remove() operation"),this._fieldOrders.length>0&&console.warn("`orderBy` is not supported in remove() operation");var t={collectionName:this._coll,query:s.QuerySerializer.encode(this._fieldFilters),multi:!0};return this._request.send("database.deleteDocument",t).then(function(t){t.code?e(0,t):e(0,{requestId:t.requestId,deleted:t.data.deleted})}),e.promise},e}();t.Query=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21),o=n(22),i=n(0),a=n(2),u=n(66),s=n(67),c=function(){function e(){}return e.encode=function(e){return(new f).encodeQuery(e)},e}();t.QuerySerializer=c;var f=function(){function e(){}return e.prototype.encodeQuery=function(e,t){var n;return s.isConversionRequired(e)?o.isLogicCommand(e)?this.encodeLogicCommand(e):r.isQueryCommand(e)?this.encodeQueryCommand(e):((n={})[t]=this.encodeQueryObject(e),n):a.isObject(e)?this.encodeQueryObject(e):e},e.prototype.encodeLogicCommand=function(e){var t,n,r,i=this;switch(e.operator){case o.LOGIC_COMMANDS_LITERAL.AND:case o.LOGIC_COMMANDS_LITERAL.OR:var a=u.operatorToString(e.operator),s=e.operands.map(function(t){return i.encodeQuery(t,e.fieldName)});return(t={})[a]=s,t;default:a=u.operatorToString(e.operator);if(1===e.operands.length){var c=this.encodeQuery(e.operands[0]);return(n={})[a]=c,n}s=e.operands.map(this.encodeQuery.bind(this));return(r={})[a]=s,r}},e.prototype.encodeQueryCommand=function(e){return r.isComparisonCommand(e),this.encodeComparisonCommand(e)},e.prototype.encodeComparisonCommand=function(e){var t,n,o,a,c,f,p,l,d;if(e.fieldName===i.SYMBOL_UNSET_FIELD_NAME)throw new Error("Cannot encode a comparison command with unset field name");var h=u.operatorToString(e.operator);switch(e.operator){case r.QUERY_COMMANDS_LITERAL.EQ:case r.QUERY_COMMANDS_LITERAL.NEQ:case r.QUERY_COMMANDS_LITERAL.LT:case r.QUERY_COMMANDS_LITERAL.LTE:case r.QUERY_COMMANDS_LITERAL.GT:case r.QUERY_COMMANDS_LITERAL.GTE:return(t={})[e.fieldName]=((n={})[h]=s.encodeInternalDataType(e.operands[0]),n),t;case r.QUERY_COMMANDS_LITERAL.IN:case r.QUERY_COMMANDS_LITERAL.NIN:return(o={})[e.fieldName]=((a={})[h]=s.encodeInternalDataType(e.operands),a),o;case r.QUERY_COMMANDS_LITERAL.GEO_NEAR:var y=e.operands[0];return(c={})[e.fieldName]={$nearSphere:{$geometry:y.geometry.toJSON(),$maxDistance:y.maxDistance,$minDistance:y.minDistance}},c;case r.QUERY_COMMANDS_LITERAL.GEO_WITHIN:y=e.operands[0];return(f={})[e.fieldName]={$geoWithin:{$geometry:y.geometry.toJSON()}},f;case r.QUERY_COMMANDS_LITERAL.GEO_INTERSECTS:y=e.operands[0];return(p={})[e.fieldName]={$geoIntersects:{$geometry:y.geometry.toJSON()}},p;default:return(l={})[e.fieldName]=((d={})[h]=s.encodeInternalDataType(e.operands[0]),d),l}},e.prototype.encodeQueryObject=function(e){var t=s.flattenQueryObject(e);for(var n in t){var i=t[n];if(o.isLogicCommand(i)){t[n]=i._setFieldName(n);var a=this.encodeLogicCommand(t[n]);this.mergeConditionAfterEncode(t,a,n)}else if(r.isComparisonCommand(i)){t[n]=i._setFieldName(n);a=this.encodeComparisonCommand(t[n]);this.mergeConditionAfterEncode(t,a,n)}else s.isConversionRequired(i)&&(t[n]=s.encodeInternalDataType(i))}return t},e.prototype.mergeConditionAfterEncode=function(e,t,n){for(var r in t[n]||delete e[n],t)e[r]?a.isArray(e[r])?e[r].push(t[r]):a.isObject(e[r])?a.isObject(t[r])?Object.assign(e,t):(console.warn("unmergable condition, query is object but condition is "+a.getType(t)+", can only overwrite",t,n),e[r]=t[r]):(console.warn("to-merge query is of type "+a.getType(e)+", can only overwrite",e,t,n),e[r]=t[r]):e[r]=t[r]},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(21),o=n(22),i=n(20),a=n(2);t.Command={eq:function(e){return new r.QueryCommand(r.QUERY_COMMANDS_LITERAL.EQ,[e])},neq:function(e){return new r.QueryCommand(r.QUERY_COMMANDS_LITERAL.NEQ,[e])},lt:function(e){return new r.QueryCommand(r.QUERY_COMMANDS_LITERAL.LT,[e])},lte:function(e){return new r.QueryCommand(r.QUERY_COMMANDS_LITERAL.LTE,[e])},gt:function(e){return new r.QueryCommand(r.QUERY_COMMANDS_LITERAL.GT,[e])},gte:function(e){return new r.QueryCommand(r.QUERY_COMMANDS_LITERAL.GTE,[e])},in:function(e){return new r.QueryCommand(r.QUERY_COMMANDS_LITERAL.IN,e)},nin:function(e){return new r.QueryCommand(r.QUERY_COMMANDS_LITERAL.NIN,e)},geoNear:function(e){return new r.QueryCommand(r.QUERY_COMMANDS_LITERAL.GEO_NEAR,[e])},geoWithin:function(e){return new r.QueryCommand(r.QUERY_COMMANDS_LITERAL.GEO_WITHIN,[e])},geoIntersects:function(e){return new r.QueryCommand(r.QUERY_COMMANDS_LITERAL.GEO_INTERSECTS,[e])},and:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=a.isArray(arguments[0])?arguments[0]:Array.from(arguments);return new o.LogicCommand(o.LOGIC_COMMANDS_LITERAL.AND,n)},or:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=a.isArray(arguments[0])?arguments[0]:Array.from(arguments);return new o.LogicCommand(o.LOGIC_COMMANDS_LITERAL.OR,n)},set:function(e){return new i.UpdateCommand(i.UPDATE_COMMANDS_LITERAL.SET,[e])},remove:function(){return new i.UpdateCommand(i.UPDATE_COMMANDS_LITERAL.REMOVE,[])},inc:function(e){return new i.UpdateCommand(i.UPDATE_COMMANDS_LITERAL.INC,[e])},mul:function(e){return new i.UpdateCommand(i.UPDATE_COMMANDS_LITERAL.MUL,[e])},push:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=a.isArray(arguments[0])?arguments[0]:Array.from(arguments);return new i.UpdateCommand(i.UPDATE_COMMANDS_LITERAL.PUSH,n)},pop:function(){return new i.UpdateCommand(i.UPDATE_COMMANDS_LITERAL.POP,[])},shift:function(){return new i.UpdateCommand(i.UPDATE_COMMANDS_LITERAL.SHIFT,[])},unshift:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=a.isArray(arguments[0])?arguments[0]:Array.from(arguments);return new i.UpdateCommand(i.UPDATE_COMMANDS_LITERAL.UNSHIFT,n)}},t.default=t.Command},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(){function e(e){var t=e.regexp,n=e.options;if(!t)throw new TypeError("regexp must be a string");this.$regex=t,this.$options=n}return e.prototype.parse=function(){return{$regex:this.$regex,$options:this.$options}},Object.defineProperty(e.prototype,"_internalType",{get:function(){return r.SYMBOL_REGEXP},enumerable:!0,configurable:!0}),e}();t.RegExp=o,t.RegExpConstructor=function(e){return new o(e)}}])});